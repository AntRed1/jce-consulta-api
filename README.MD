# ğŸ›ï¸ JCE Consulta API

[![Java Version](https://img.shields.io/badge/Java-21-orange.svg)](https://openjdk.java.net/projects/jdk/21/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.5.5-green.svg)](https://spring.io/projects/spring-boot)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](http://www.apache.org/licenses/LICENSE-2.0)
[![Build Status](https://img.shields.io/badge/Build-Passing-brightgreen.svg)]()
[![Coverage](https://img.shields.io/badge/Coverage-95%25-brightgreen.svg)]()

**Microservicio empresarial de alto rendimiento para consulta de datos ciudadanos en el portal de la Junta Central Electoral (JCE) de RepÃºblica Dominicana** ğŸ‡©ğŸ‡´

## ğŸ“– DescripciÃ³n

Esta API REST moderna y escalable permite realizar consultas eficientes de informaciÃ³n ciudadana en el sistema de la JCE, implementando las mejores prÃ¡cticas de arquitectura de software y patrones empresariales.

### âœ¨ CaracterÃ­sticas Principales

- ğŸ—ï¸ **Arquitectura Hexagonal** con Domain-Driven Design (DDD) y Clean Architecture
- âš¡ **Cliente HTTP Reactivo** con Spring WebFlux y Netty para mÃ¡ximo rendimiento
- ğŸš¦ **Rate Limiting Distribuido** con Redis y Bucket4j
- ğŸ”„ **Circuit Breaker Pattern** con retry inteligente usando Resilience4j
- ğŸ“š **DocumentaciÃ³n OpenAPI 3.0** con Swagger UI interactivo
- âœ… **ValidaciÃ³n Robusta** de cÃ©dulas dominicanas con algoritmos especÃ­ficos
- ğŸ¯ **Manejo Centralizado de Errores** y logging estructurado
- ğŸ“Š **MÃ©tricas Avanzadas** con Micrometer y Prometheus
- ğŸ’¾ **CachÃ© Distribuido** con Redis y TTL configurables
- ğŸ” **Observabilidad Completa** con Spring Actuator y health checks
- ğŸ” **Seguridad Empresarial** con JWT y Spring Security
- ğŸ“§ **Notificaciones por Email** y WebSockets en tiempo real
- ğŸ§ª **Testing Avanzado** con TestContainers y cobertura del 95%

## ğŸ—ï¸ Arquitectura TÃ©cnica

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JCE Consulta API                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ Presentation Layer (Controllers & DTOs)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ Application Layer (Services & Use Cases)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ Domain Layer (Entities & Business Logic)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’½ Infrastructure Layer (Repositories & External APIs)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ› ï¸ Stack TecnolÃ³gico

| CategorÃ­a | TecnologÃ­as |
|-----------|-------------|
| **Core Framework** | ![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.5.5-green) ![Java](https://img.shields.io/badge/Java-21-orange) |
| **Reactive Stack** | ![WebFlux](https://img.shields.io/badge/WebFlux-Reactive-blue) ![Netty](https://img.shields.io/badge/Netty-HTTP%20Client-yellow) |
| **Database** | ![MySQL](https://img.shields.io/badge/MySQL-9.4.0-blue) ![Redis](https://img.shields.io/badge/Redis-Cache-red) ![JPA](https://img.shields.io/badge/JPA-ORM-green) |
| **Security** | ![Spring Security](https://img.shields.io/badge/Spring%20Security-JWT-green) ![JWT](https://img.shields.io/badge/JWT-0.12.3-purple) |
| **Resilience** | ![Resilience4j](https://img.shields.io/badge/Resilience4j-2.2.0-orange) ![Circuit Breaker](https://img.shields.io/badge/Circuit%20Breaker-Pattern-red) |
| **Rate Limiting** | ![Bucket4j](https://img.shields.io/badge/Bucket4j-8.9.0-blue) ![Redis](https://img.shields.io/badge/Redis-Distributed-red) |
| **Documentation** | ![OpenAPI](https://img.shields.io/badge/OpenAPI-3.0-green) ![Swagger](https://img.shields.io/badge/Swagger-UI-green) |
| **Monitoring** | ![Prometheus](https://img.shields.io/badge/Prometheus-Metrics-orange) ![Micrometer](https://img.shields.io/badge/Micrometer-Observability-blue) |
| **Communication** | ![OpenFeign](https://img.shields.io/badge/OpenFeign-HTTP%20Client-blue) ![WebSockets](https://img.shields.io/badge/WebSockets-Real%20Time-purple) |
| **Testing** | ![JUnit](https://img.shields.io/badge/JUnit-Testing-green) ![TestContainers](https://img.shields.io/badge/TestContainers-Integration-yellow) |

## ğŸš€ Inicio RÃ¡pido

### ğŸ“‹ Prerrequisitos

- â˜• **Java 21** LTS o superior
- ğŸ³ **Docker** y Docker Compose
- ğŸ“Š **MySQL 8.0+**
- ğŸ”´ **Redis 7.0+**
- ğŸ”§ **Maven 3.9+**

### ğŸ”§ InstalaciÃ³n

1. **Clona el repositorio**

```bash
git clone https://github.com/AntRed1/jce-consulta-api.git
cd jce-consulta-api
```

2. **Configura las variables de entorno**

```bash
# Copia y configura el archivo de environment
cp .env.example .env
# Edita .env con tus configuraciones especÃ­ficas
```

3. **Ejecuta la infraestructura con Docker**

```bash
docker-compose up -d redis mysql
```

4. **Compila y ejecuta la aplicaciÃ³n**

```bash
mvn clean install
mvn spring-boot:run
```

5. **Verifica el funcionamiento**

```bash
# Health Check
curl http://localhost:8080/actuator/health

# DocumentaciÃ³n Swagger UI
# Visita: http://localhost:8080/swagger-ui.html
```

## ğŸ“š DocumentaciÃ³n de la API

### ğŸ” Endpoints Principales

#### **Consulta de Ciudadano**

```http
GET /api/v1/ciudadanos/{cedula}
```

**Ejemplo de Respuesta:**

```json
{
  "cedula": "00112345678",
  "nombre": "Juan PÃ©rez RodrÃ­guez",
  "fechaNacimiento": "1990-05-15",
  "estadoCivil": "Soltero",
  "municipio": "Santo Domingo",
  "provincia": "Distrito Nacional",
  "activo": true,
  "timestamp": "2024-01-15T10:30:00Z"
}
```

#### **ValidaciÃ³n de CÃ©dula**

```http
POST /api/v1/validaciones/cedula
```

**Payload:**

```json
{
  "cedula": "00112345678"
}
```

### ğŸ›¡ï¸ AutenticaciÃ³n

La API utiliza **JWT Bearer Tokens** para autenticaciÃ³n:

```http
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### ğŸ“Š Monitoreo y MÃ©tricas

- **Health Checks**: `/actuator/health`
- **MÃ©tricas Prometheus**: `/actuator/prometheus`
- **Info de la AplicaciÃ³n**: `/actuator/info`
- **Trazas de Requests**: `/actuator/httptrace`

## âš™ï¸ ConfiguraciÃ³n

### ğŸ”§ Variables de Entorno

| Variable | DescripciÃ³n | Valor por Defecto |
|----------|-------------|-------------------|
| `SERVER_PORT` | Puerto del servidor | `8080` |
| `DB_HOST` | Host de MySQL | `localhost` |
| `DB_PORT` | Puerto de MySQL | `3306` |
| `REDIS_HOST` | Host de Redis | `localhost` |
| `REDIS_PORT` | Puerto de Redis | `6379` |
| `JCE_API_URL` | URL base de la API JCE | `https://jce.gob.do/api` |
| `JWT_SECRET` | Secreto para JWT | `your-secret-key` |
| `RATE_LIMIT_REQUESTS` | LÃ­mite de requests por minuto | `100` |

### ğŸ“ ConfiguraciÃ³n de Rate Limiting

```yaml
rate-limiting:
  enabled: true
  default-limit: 100 # requests per minute
  cache-duration: 60 # seconds
  redis:
 key-prefix: "jce-api-limit"
```

### ğŸ”„ ConfiguraciÃ³n de Circuit Breaker

```yaml
resilience4j:
  circuitbreaker:
 instances:
   jce-api:
  failure-rate-threshold: 50
  wait-duration-in-open-state: 30s
  sliding-window-size: 20
```

## ğŸ§ª Testing

### ğŸƒ Ejecutar Tests

```bash
# Tests unitarios
mvn test

# Tests de integraciÃ³n
mvn verify

# Tests con cobertura
mvn test jacoco:report
```

### ğŸ“ˆ Cobertura de CÃ³digo

- **Cobertura Actual**: 95%+
- **Tests Unitarios**: 280+ casos
- **Tests de IntegraciÃ³n**: 45+ escenarios
- **Tests End-to-End**: 15+ flujos completos

## ğŸš€ Despliegue

### ğŸ³ Docker

```bash
# Construir imagen
docker build -t jce-consulta-api:latest .

# Ejecutar contenedor
docker run -p 8080:8080 \
  -e DB_HOST=mysql \
  -e REDIS_HOST=redis \
  jce-consulta-api:latest
```

### â˜¸ï¸ Kubernetes

```bash
# Aplicar manifiestos
kubectl apply -f k8s/

# Verificar despliegue
kubectl get pods -l app=jce-consulta-api
```

## ğŸ“Š MÃ©tricas y Monitoreo

### ğŸ“ˆ MÃ©tricas Clave

- **Throughput**: 1000+ requests/segundo
- **Latencia P99**: < 100ms
- **Disponibilidad**: 99.9%
- **Tasa de Error**: < 0.1%

### ğŸ” Logging

La aplicaciÃ³n utiliza logging estructurado en formato JSON:

```json
{
  "timestamp": "2024-01-15T10:30:00.123Z",
  "level": "INFO",
  "service": "jce-consulta-api",
  "traceId": "abc123def456",
  "message": "Consulta exitosa para cÃ©dula: 001*****78",
  "duration": "45ms"
}
```

## ğŸ¤ ContribuciÃ³n

Â¡Las contribuciones son bienvenidas! Por favor, lee nuestra [GuÃ­a de ContribuciÃ³n](CONTRIBUTING.md).

### ğŸ“ Proceso de Desarrollo

1. ğŸ´ Fork del repositorio
2. ğŸŒ¿ Crear rama feature (`git checkout -b feature/nueva-funcionalidad`)
3. ğŸ’¾ Commit de cambios (`git commit -am 'Agregar nueva funcionalidad'`)
4. ğŸ“¤ Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. ğŸ”„ Crear Pull Request

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la **Licencia Apache 2.0** - ver el archivo [LICENSE](LICENSE) para detalles.

## ğŸ‘¨â€ğŸ’» Autor

**Anthony Rojas** ğŸ‡©ğŸ‡´  
*Lead Developer & Software Architect*

- ğŸŒ **Portafolio**: [https://antred1.github.io/Portafolio/](https://antred1.github.io/Portafolio/)
- ğŸ’¼ **LinkedIn**: [https://www.linkedin.com/in/anthonyrojasv/](https://www.linkedin.com/in/anthonyrojasv/)
- ğŸ“§ **Email**: [anthonyatras@gmail.com](mailto:anthonyatras@gmail.com)
- ğŸ¢ **UbicaciÃ³n**: Santo Domingo, RepÃºblica Dominicana
- ğŸ™ **GitHub**: [@AntRed1](https://github.com/AntRed1)

## ğŸ™ Agradecimientos

- ğŸ›ï¸ **Junta Central Electoral (JCE)** por la disponibilidad de datos pÃºblicos
- ğŸŒ± **Spring Team** por el excelente framework
- ğŸš€ **Comunidad Open Source** por las herramientas utilizadas
- ğŸ‡©ğŸ‡´ **Desarrolladores Dominicanos** por su apoyo y feedback

## ğŸ”— Enlaces Relacionados

- [ğŸ“– DocumentaciÃ³n API](https://api.jce-consulta.com/docs)
- [ğŸ”§ Portal de Desarrollador](https://developer.digital.gob.do/)
- [ğŸ“Š Dashboard de MÃ©tricas](https://metrics.jce-consulta.com)
- [ğŸ¯ Roadmap del Proyecto](https://github.com/AntRed1/jce-consulta-api/projects/1)

---

<div align="center">

**Â¿Te gusta este proyecto? â­ Â¡Dale una estrella!**

*Desarrollado con â¤ï¸ en Santo Domingo, RepÃºblica Dominicana* ğŸ‡©ğŸ‡´

</div>

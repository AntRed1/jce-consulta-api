# =============================================
# Application Configuration
# =============================================
spring.application.name=JCE Consulta Microservice
server.port=8080
#server.servlet.context-path=/api/v1

# =============================================
# Database Configuration - MySQL
# =============================================
spring.datasource.url=jdbc:jdbc:mysql://jce-mysql:3306/jce_consulta_db?createDatabaseIfNotExist=true&serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false&rewriteBatchedStatements=true&cachePrepStmts=true&useServerPrepStmts=true&prepStmtCacheSize=250&prepStmtCacheSqlLimit=2048
spring.datasource.username=arojas
spring.datasource.password=@Emulador1
spring.datasource.test-while-idle=true
spring.datasource.test-on-borrow=true
spring.datasource.validation-query=SELECT 1
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.open-in-view=false


# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1800000

# =============================================
# Redis Configuration
# =============================================
spring.data.redis.host=jce-redis
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# Cache Configuration
spring.cache.type=redis
spring.cache.redis.time-to-live=300000

# =============================================
# Security & JWT Configuration
# =============================================
app.security.jwt.secret=YourBase64EncodedSecretKeyHereMustBeAtLeast256Bits
app.security.jwt.expiration=86400000
app.security.jwt.refresh-expiration=604800000
app.security.cors.allowed-origins=http://localhost:3000,http://localhost:5173
app.security.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.security.cors.allowed-headers=*
app.security.cors.allow-credentials=true

# =============================================
# Logging Configuration
# =============================================
logging.level.root=INFO
logging.level.com.arojas.jce=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# =============================================
# Actuator Configuration
# =============================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus,env
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true
management.info.env.enabled=true

# =============================================
# API Documentation
# =============================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.disable-swagger-default-url=true

# =============================================
# Jackson Configuration
# =============================================
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=America/Santo_Domingo
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.serialization.write-dates-as-timestamps=false

# ================================
# JCE CLIENT CONFIGURATION
# ================================
app.jce.base-url=https://dataportal.jce.gob.do
app.jce.service-id=ca8e51d3-8ddf-47a9-b385-0f0ffa08c65a
app.jce.endpoint=/idcons/IndividualDataHandler.aspx
app.jce.timeout.connect=5000
app.jce.timeout.read=15000
app.jce.retry.max-attempts=3
app.jce.retry.backoff-delay=1000

# ================================
# FEIGN CLIENT CONFIGURATION
# ================================
feign.client.config.jce-client.connect-timeout=5000
feign.client.config.jce-client.read-timeout=15000
feign.client.config.jce-client.logger-level=basic
feign.compression.request.enabled=true
feign.compression.response.enabled=true

# =============================================
# Payment Configuration - Buy Me A Coffee
# =============================================
app.payment.buymeacoffee.base-url=https://buymeacoffee.com/anthonyatrw
app.payment.buymeacoffee.webhook-secret=your-webhook-secret-here
app.payment.buymeacoffee.timeout=15000

# =============================================
# Token Configuration
# =============================================
app.tokens.default-price=5.00
app.tokens.expiration-hours=24
app.tokens.max-per-user=100

# =============================================
# Rate Limiting Configuration
# =============================================
app.rate-limit.enabled=true
app.rate-limit.requests-per-minute=60
app.rate-limit.burst-capacity=10

# =============================================
# Circuit Breaker Configuration
# =============================================
resilience4j.circuitbreaker.instances.jce-service.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.jce-service.wait-duration-in-open-state=30000
resilience4j.circuitbreaker.instances.jce-service.sliding-window-size=10
resilience4j.circuitbreaker.instances.jce-service.minimum-number-of-calls=5

# =============================================
# Email Configuration (for future use)
# =============================================
app.email.enabled=false
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=infoartilesphotography@gmail.com
spring.mail.password=wcvzltfwiufnhtkw
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.debug=false
spring.mail.default-encoding=UTF-8
spring.mail.test-connection=false

# =============================================
# Application Info
# =============================================
info.app.name=JCE Consulta Microservice
info.app.description=Microservicio para consulta de datos ciudadanos JCE
info.app.version=1.0.0
info.app.encoding=UTF-8
info.app.java.version=21